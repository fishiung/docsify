# 接口开发规范


## 1 RESTful 规范

1. **`[W1-1]`** 使用`HTTP(S)`协议

2. **`[W1-2]`** 正常情况下数据返回格式为 `JSON`

3. **`[W1-3]`** 在URL 中添加 `api `

   ```
   http(s)://example.org/api/
   ```

4. **`[W1-4]`** 在URL中添加版本号

   ```
    http(s)://example.com/api/v1/
   ```

5. **`[W1-5]`** URL路径由资源名称组成

6. **`[W1-6]`** 使用标准HTTP方法(GET、PUT、POST、DELETE)，并遵循这些方法的语义

   | 方法   | 含义                                                         | 规约                                                         |
   | :----- | :----------------------------------------------------------- | ------------------------------------------------------------ |
   | GET    | 从服务器取出资源（一项或多项）/ 简单的查询请求               | 参数不得超过5个，超过5个考虑POST,使用对象封装，含有字符串文本的查询，使用POST |
   | POST   | 在服务器新建一个资源 / 复杂的查询请求(请求参数过多，需要使用对象封装) |                                                              |
   | PUT    | 在服务器更新资源                                             | 客户端提供改变后的完整资源                                   |
   | DELETE | 从服务器删除资源                                             | 使用资源 ID 进行定位                                         |



## 2 命名

1. **`[W2-1]`** 不包括资源的操作/ 不包括动词

   ```
   错误示例：
   GET /getUser/1    			-- 获取id=1的用户
   POST /createUser			-- 创建用户
   PUT /updateUser/1			-- 更新id=1的用户 
   DELETE /deleteUser/1		-- 删除id=1的用户
   
   正确示例：
   GET /users/1
   POST /users
   PUT /users/1
   DELETE /users/1
   ```

2. **`[W2-2]`** 资源使用复数形式

   ```
   GET /zoo      --列出所有动物园  错误
   GET /zoos     --正确
   ```

3. **`[W2-3]`** 使用资源定位资源

   ```
   GET /zoos/animals/{zooId}  --列出某个动物园的所有动物 错误
   GET /zoos/{zooId}/animals  --正确
   ```

4. **`[W2-4]`** 当资源为多个英文单词组成时遵守`LowerCamelCase `风格

   ```
   GET /testplans  --获取测试计划列表  错误
   GET /testPlans  --正确
   ```

5. **`[W2-5]`** 自定义Header 或者 Cookie 键值对命名遵守`LowerCamelCase `风格

   

## 3  其他

1. **`[W3-1]`** 返回格式

   ```json
   {
   	"message": "some message", //消息
   	"data": {}, //返回的数据，也可以是一个数组[]
   	"statusCode": 200 //状态码
   }
   ```

   | 状态码 | 英文释义              |   适用方法   | 说明                                               |
   | ------ | --------------------- | :----------: | -------------------------------------------------- |
   | 200    | OK                    | [GET] [POST] | 服务器成功返回用户请求的数据，幂等操作             |
   | 201    | Created               | [POST] [PUT] | 用户新建或修改数据成功                             |
   | 202    | Accepted              |     [*]      | 请求已进入后台排队或消息队列（异步任务）           |
   | 204    | No Content            |   [DELETE]   | 用户删除数据成功                                   |
   | 400    | Bad Request           |     [*]      | 用户请求语法错误，服务器无法解析，幂等操作         |
   | 401    | Unauthorized          |     [*]      | 表示用户没有权限（令牌、用户名、密码错误）         |
   | 403    | Forbidden             |     [*]      | 用户得到授权（与401相对），但访问是被禁止的        |
   | 404    | Not Found             |     [*]      | 用户请求的资源不存在，服务器没有进行操作，幂等操作 |
   | 500    | Internal Server Error |     [*]      | 服务器内部错误，无法完成请求                       |

   